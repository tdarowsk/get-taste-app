---
import Layout from "../layouts/ProtectedLayout.astro";
import { TasteService } from "../lib/services/taste.service";
// Get the current user ID from environment or session (replace with real logic)
const userId = import.meta.env.PUBLIC_USER_ID || "test-user";
// Fetch user taste server-side
const taste = await TasteService.getUserTaste(userId);
---

<Layout title="Twój Profil Gustu">
  <main class="prose mx-auto py-8">
    <h1 class="text-3xl font-bold">Profil Twojego Gustu</h1>
    <section>
      <h2 class="text-2xl mt-6">{taste.name}</h2>
      <p class="mt-2">{taste.description}</p>
    </section>

    {
      taste.music && (
        <section>
          <h3 class="text-xl mt-6">Analiza Muzyczna</h3>
          <ul class="list-disc list-inside mt-2">
            <li>
              <strong>Gatunki:</strong> {taste.music.genres.join(", ")}
            </li>
            <li>
              <strong>Nastrój:</strong> {taste.music.mood.join(", ")}
            </li>
            <li>
              <strong>Styl:</strong> {taste.music.style}
            </li>
            <li>
              <strong>Intensywność:</strong> {taste.music.intensity}
            </li>
            <li>
              <strong>Różnorodność:</strong> {taste.music.variety}
            </li>
          </ul>
        </section>
      )
    }

    {
      taste.film && (
        <section>
          <h3 class="text-xl mt-6">Analiza Filmowa</h3>
          <ul class="list-disc list-inside mt-2">
            <li>
              <strong>Gatunki:</strong> {taste.film.genres.join(", ")}
            </li>
            <li>
              <strong>Nastrój:</strong> {taste.film.mood.join(", ")}
            </li>
            <li>
              <strong>Styl:</strong> {taste.film.style}
            </li>
            <li>
              <strong>Intensywność:</strong> {taste.film.intensity}
            </li>
            <li>
              <strong>Różnorodność:</strong> {taste.film.variety}
            </li>
          </ul>
        </section>
      )
    }
  </main>
</Layout>
