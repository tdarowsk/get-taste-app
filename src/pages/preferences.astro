---
// Import komponentów
import MainLayout from "../layouts/MainLayout.astro";
import { FilmPreferencesPanel } from "../components/dashboard/FilmPreferencesPanel";

// Logika sprawdzania użytkownika
const user = Astro.locals.user;
const userId = user?.id;

// Przekierowanie niezalogowanych użytkowników
if (!userId) {
  return Astro.redirect("/auth/login");
}
---

<MainLayout title="Your Preferences - getTaste">
  <div class="max-w-4xl mx-auto pt-8">
    <FilmPreferencesPanel userId={userId} client:load />
    
    <div class="mt-8 p-6 bg-gray-900 rounded">
      <h2 class="text-2xl font-bold text-white mb-2">Generate Recommendations</h2>
      <p class="text-gray-400 text-sm mb-6">
        Based on your preferences, we can generate personalized recommendations for you.
      </p>
      
      <a 
        href="/recommendations" 
        class="inline-flex items-center justify-center py-2 px-4 rounded-full bg-purple-600 text-white hover:bg-purple-700 transition-colors"
      >
        Generate Recommendations
      </a>
    </div>
  </div>
</MainLayout> 